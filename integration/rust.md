---
title: Rust
---

To integrate with Rust you need to make sure that your _trix_ project has the `rust` bindings generation enabled in the config:

```toml
[[bindings]]
plugin = "rust"
output_dir = "./gen/rust"
```

With the binding generation enabled, run the following command from your CLI to trigger the code generator:

```
trix bindgen
```

If things went well, you should see the following new files:

```
my-protocol/
└── gen/
    └── rust/
        ├── lib.rs
        └── Cargo.toml
```

That new `lib.rs` file has the required types and functions to call your protocol from a Rust code.

The `Cargo.toml` file is a standard file for Rust projects.

Now, we can use the generated bindings to build a transaction using our protocol.

First access to the `gen/rust` folder

```bash
cd gen/rust
```

We need to open `lib.rs` and update the TRP endpoint to point to the correct URL (unless you have it configured in `trix.toml`). For the local devnet the TRP endpoint is available at `http://localhost:8164/`. If you're using a different port or network, update this value accordingly or set it in `trix.toml`.

For the following example, we will use the main.tx3 file generated by trix.

Before running the example below, start the local devnet in a separate terminal with:

```
trix devnet
```

The devnet will start and print timestamped INFO logs that show the Devnet components starting, running, and stopping.
While the emulator is starting you should see startup messages and the tool prints sample wallets and addresses.

### Checking addresses in Devnet

If you don’t see addresses in the console or if you need to look up the addresses for a specific named wallet (for example a wallet defined in `trix.toml`), you can run:

```bash
trix wallet <name>
# e.g. trix wallet alice
```

This command returns a small JSON structure that includes the `testnet` address you should use in examples. Example output:

```json
{
    "name": "alice",
    "public_key": "9b1622919b3a74c037599d67d065f10c46c047801efe024a80344e79be4d9c0b2edb662977726943b63e8c9c5ee761c77f682ee31ef28e74fcab8a54bf692438",
    "addresses": {
        "testnet": "addr_test1vqn7k6gfllvhauxkzw478ds2f9axmu4qw78pm86dtyd40yqg2w3rq",
        "mainnet": "addr1vyn7k6gfllvhauxkzw478ds2f9axmu4qw78pm86dtyd40yqnz6dv9"
    }
}
```

Use the `testnet` address value as the sender/receiver address in the Rust example.

Now, create a new file called `src/bin/test.rs` inside the generated crate (for example: `gen/rust/src/bin/test.rs`) so that Cargo can find and run it. Add the following code (replace the placeholder addresses with the ones obtained via `trix wallet`):

```rust
use tx3_sdk::trp::args::ArgValue;

#[tokio::main]
async fn main() {
    let params = trix_example::TransferParams {
        sender: ArgValue::from("addr_test1vqn7k6gfllvhauxkzw478ds2f9axmu4qw78pm86dtyd40yqg2w3rq"),
        receiver: ArgValue::from("addr_test1vqxazu4ekxrxlk238wt0e03h3gk44hrlkjvef85gvh2nahcgnmpfc"),
        quantity: ArgValue::Int(100000000),
    };

    match trix_example::PROTOCOL.transfer_tx(params).await {
        Ok(cbor) => {
            println!("{:?}", cbor);
        },
        Err(error) => {
            eprintln!("Error: {:?}", error);
        }
    }
}
```

**NOTE**: Replace `trix_example` with the name of your protocol.

To your Cargo.toml file, add the following dependencies:

```toml
tokio = { version = "1", features = ["full"] }
```

Finally, we can run the test file to build a transaction using our protocol:

```bash
cargo run --bin test
```

If everything went well, you should see a message like this:

```bash
TxEnvelope { tx: "84a400d9010281825820705e5d956d318264043baf8031e250c14b8703b69947ab2d3212d67210c4b240010182a200581d60464d4cb029fc90cf720600b2f271a2d433517ad32a67eac5eb9bba5c011a05f5e100a200581d605189743c77fc84cc571235062e4f0de28370f6273ade37697d850b40011b0000000248151ad6021a000583ed0f00a0f5f6" }
```
